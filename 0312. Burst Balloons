class Solution {
public:
    int maxCoins(vector<int>& nums) {
        nums.insert(nums.begin(),1);
        nums.insert(nums.end(),1);
        int Length = nums.size();
        vector<vector<int>> dp(Length,vector<int>(Length,0));
        
        for (int len = 1; len <= Length; len++) {
            for (int start = 1; start + len - 1 <= Length; start++) {
                int end = start + len - 1;
                int bestCoin = 0;
                for (int Final = start; Final <= end;Final++) {
                    int coin = dp[start][Final-1] + dp[Final+1][end];
                    coin += nums[start-1] + nums[Final] + nums[end+1];
                    if (coin > bestCoin) {
                        bestCoin = coin;
                    }
                }
                dp[start][end] = bestCoin;
            }
        }
        return 1;
    }
};
